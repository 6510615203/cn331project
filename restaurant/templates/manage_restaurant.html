{% extends "base_restaurant.html" %}
{% load static %}
{% block title %}
<title>Restaurant Management</title>
{% endblock %}

{% block style %}
<link rel="stylesheet" type="text/css" href="{% static 'css/manage_restaurant.css' %}">
{% endblock %}

{% block content %}

<div class="container mt-5 signup-container">


    <div class="position">
        <div class="picposition">
            <div class="image-container" style="display: flex; flex-direction: column; align-items: center;">
                <div class="image-preview-circle"
                    style="width: 150px; height: 150px; border-radius: 50%; overflow: hidden; margin-top: 10px; display: flex; justify-content: center; align-items: center; border: 3px solid #ccc;">
                    <img id="image_preview" src="#" alt="Image Preview"
                        style="display: none; width: 100%; height: 100%; object-fit: cover;">
                </div>
                <label for="restaurant_picture" class="form-title" style="margin-top: 10px; cursor: pointer;">Edit your
                    logo</label>
            </div>
            <input type="file" class="form-input" id="restaurant_picture" name="restaurant_picture"
                onchange="previewImage();" style="display: none;">
        </div>

    </div>


    <div class="inputposition">

        <div class="form-section">
            <label for="restaurant_name" class="form-title">ชื่อร้านอาหาร</label>
            {% if is_editing == "restaurant_name" %}
            <form method="POST" action="{% url 'restaurant:manage'%}?edit=restaurant_name" class="form-inline">
                {% csrf_token %}
                <input type="text" id="restaurant_name" name="restaurant_name" value="{{ restaurant.restaurant_name }}"
                    required>
                <button type="submit" class="button">Save</button>
            </form>
            {% else %}
            <div class="box">
                <p>{{ restaurant.restaurant_name }}</p>
            </div>
            <a href="{% url 'restaurant:manage' %}?edit=restaurant_name" class="button">Edit</a>
            {% endif %}
        </div>


        <div class="form-section">
            <label for="food_category" class="form-title">ประเภทอาหาร</label>
            {% if is_editing == "food_category" %}
            <form method="POST" action="{% url 'restaurant:manage'%}?edit=food_category">
                {% csrf_token %}
                <select id="food_category" name="food_category" required>
                    {% for value, display in food_categories %}
                    <option value="{{ value }}">{{ display }}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="button">Save</button>
            </form>
            {% else %}
            <div class="box">
                <p>{{ restaurant.food_category }}</p>
            </div>
            <a href="{% url 'restaurant:manage' %}?edit=food_category" class="button">Edit</a>
            {% endif %}
        </div>

        <div class="form-section">
            <label for="about" class="form-title">เกี่ยวกับ</label>
            {% if is_editing == "about" %}
            <form method="POST" action="{% url 'restaurant:manage'%}?edit=about">
                {% csrf_token %}
                <input type="text" id="about" name="about" value="{{ restaurant.about }}" required>
                <button type="submit" class="button">Save</button>
            </form>
            {% else %}
            <div class="box">
                <p>{{ restaurant.about }}</p>
            </div>
            <a href="{% url 'restaurant:manage' %}?edit=about" class="button">Edit</a>
            {% endif %}
        </div>


        <div class="form-section">
            <label for="open_close_time" class="form-title">เวลาเปิด - ปิด (น.)</label>
            {% if is_editing == "open_close_time" %}
            <form method="POST" action="{% url 'restaurant:manage'%}?edit=open_close_time">
                {% csrf_token %}
                <input type="text" id="open_close_time" name="open_close_time" value="{{ restaurant.open_close_time }}"
                    required>
                <button type="submit" class="button">Save</button>
            </form>
            {% else %}
            <div class="box">
                <p>{{ restaurant.open_close_time }}</p>
            </div>
            <a href="{% url 'restaurant:manage' %}?edit=open_close_time" class="button">Edit</a>
            {% endif %}
        </div>



        <input type="hidden" name="username" value="{{ username}}">


        <div class="form-button">
            <form method="GET" action="{% url 'restaurant:edit_menu_payment'%}">
                <button type="submit" class="button">Edit Menu</button>
            </form>
        </div>
    </div>
</div>

</div>
<script>
    function previewImage() {
        var file = document.getElementById("restaurant_picture").files[0];
        var reader = new FileReader();

        reader.onload = function (e) {
            var image = document.getElementById("image_preview");
            image.src = e.target.result;
            image.style.display = "block";
        };

        if (file) {
            reader.readAsDataURL(file);
        }
    }
</script>





{% endblock %}